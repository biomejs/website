---
title: Расширение VS Code
description: Заметки о расширении Biome для VSCode
---
import { FileTree } from '@astrojs/starlight/components';
import { Tabs, TabItem } from '@astrojs/starlight/components';
import { Badge } from '@astrojs/starlight/components';

Biome поставляется с официальным [расширением для VS Code], которое тесно интегрируется с
вашим редактором кода, предоставляя возможности форматирования, линтинга и рефакторинга кода в ваш
рабочий процесс разработки.

[расширением для VS Code]: https://marketplace.visualstudio.com/items?itemName=biomejs.biome

Этот справочный документ предоставляет обзор возможностей расширения, инструкции по его установке
и настройке для ваших проектов.

:::tip
Если вы обновляетесь с версии расширения `2.x`, ознакомьтесь с [инструкциями по миграции](#migrating-from-the-2x-extension) в конце этого документа.
:::

## Установка расширения

Рекомендуемый способ установки расширения — через [Visual Studio Code Marketplace]
для пользователей VS Code или через [реестр Open VSX] для VSCodium и других производных, таких как Cursor.

[Visual Studio Code Marketplace]: https://marketplace.visualstudio.com/items?itemName=biomejs.biome
[реестр Open VSX]: https://open-vsx.org/extension/biomejs/biome

- [![](https://img.shields.io/badge/Install%20Biome-in%20VS%20Code-007ACC?style=flat&logo=biome)](vscode:extension/biomejs.biome)
- [![](https://img.shields.io/badge/Install%20Biome-in%20VSCodium-007ACC?style=flat&logo=biome)](vscodium:extension/biomejs.biome)


## Распространённые варианты использования

### Рабочие пространства с одним корнем

Рабочее пространство с одним корнем — это типичное рабочее пространство VS Code, где есть только одна папка рабочего пространства.

<FileTree>
- src/
  - main.ts
- biome.json
- package.json
</FileTree>

### Рабочие пространства с несколькими корнями

Рабочее пространство с несколькими корнями — это пространство, где присутствует несколько папок рабочего пространства. В этом случае расширение автоматически создаст
экземпляр Biome для каждой папки рабочего пространства.

<FileTree>
- api/ (workspace folder)
	- biome.json
	- src/
		- main.ts
- app/ (workspace folder)
	- biome.json
	- src/
		- main.ts
- my.code-workspace
</FileTree>

## Возможности

### Форматирование

Расширение Biome регистрирует себя в качестве форматтера для [поддерживаемых типов файлов](/internals/language-support) и поддерживает форматирование всего файла или выделенного фрагмента кода.

Выполните одну из следующих команд из [палитры команд](https://code.visualstudio.com/docs/getstarted/userinterface#_command-palette):

- Для форматирования всего файла выполните команду `Format Document`.
- Для форматирования выделенного фрагмента кода выделите код и выполните команду `Format Selection`.

#### Форматирование при сохранении

Чтобы включить форматирование при сохранении, установите настройку VS Code [`editor.formatOnSave`](vscode://settings/editor.formatOnSave) в значение `true`.

### Исправление кода

Расширение Biome регистрирует себя в качестве провайдера code action для [поддерживаемых типов файлов](/internals/language-support) и предоставляет исправления кода для диагностик,
у которых есть безопасные исправления.

#### Исправление при сохранении

Чтобы включить **исправление при сохранении**, обновите настройку VS Code [`editor.codeActionsOnSave`](vscode://settings/editor.codeActionsOnSave), добавив следующее. Это применит только [безопасные исправления](/linter/#safe-fixes):

```diff
{
  "editor.codeActionsOnSave": {
+    "source.fixAll.biome": "explicit"
  }
}
```

Если вы хотите применять [небезопасные исправления](/linter/#unsafe-fixes) при сохранении, необходимо [сделать исправление кода правила безопасным](/linter/#configure-the-code-fix).

#### Ручные быстрые исправления

Чтобы применить быстрое исправление вручную, выберите диагностику и нажмите кнопку `Quick Fix`.

### Сортировка импортов

Расширение способно сортировать импорты при сохранении для [поддерживаемых типов файлов](/internals/language-support). Чтобы включить эту функцию, установите настройку VS Code [`editor.codeActionsOnSave`](vscode://settings/editor.codeActionsOnSave), добавив следующее:

```diff title="settings.json"
{
  "editor.codeActionsOnSave": {
+    "source.organizeImports.biome": "explicit"
  }
}
```



## Справочник по настройкам

Для расширения доступны следующие настройки.

:::note[Приоритет настроек]
Все настройки разрешаются с использованием [правил приоритета настроек](https://code.visualstudio.com/docs/getstarted/settings#_settings-precedence) VS Code.
Это означает, что будет использовано значение настройки на наиболее конкретном уровне. Это позволяет установить глобальную настройку и переопределить её для конкретных
папок рабочего пространства.
:::

### `biome.enabled`

**По умолчанию:** `true` | **Области действия:** `global`, `workspace`, `workspace folder`

Эта настройка контролирует, будет ли расширение создавать LSP-сессию для папки рабочего пространства. Когда установлена глобально, применяется ко всем папкам рабочего пространства, если они сами не переопределяют эту настройку.

### `biome.configurationPath`

:::caution[Только Biome v2]
Эта настройка будет действовать только при использовании Biome `v2`. Если вы используете Biome `v1`, эта настройка будет проигнорирована.
:::

**По умолчанию:** `null` | **Области действия:** `global`, `workspace`, `workspace folder`

Эта настройка позволяет указать путь к пользовательскому файлу конфигурации. Если не указано, будет использован файл конфигурации по умолчанию.

### `biome.requireConfiguration`

**По умолчанию:** `false` | **Области действия:** `global`, `workspace`, `workspace folder`

Эта настройка контролирует, будет ли Biome регистрировать себя в качестве форматтера и провайдера диагностики.

Когда установлено значение `true`, расширение зарегистрирует себя в качестве форматтера и провайдера диагностики только при наличии файла `biome.json` в папке рабочего пространства.

:::caution
Настройка `biome.enabled` должна быть установлена в `true` (по умолчанию) в той же области, чтобы эта настройка вступила в силу.
:::


### `biome.lsp.bin`

**По умолчанию:** `undefined` | **Области действия:** `global`, `workspace`, `workspace folder`

Эта настройка позволяет переопределить путь к бинарному файлу `biome`. Это полезно, если вы хотите использовать другую версию Biome
или если хотите использовать бинарный файл, которого нет в вашем `PATH`. Может быть либо путём к бинарному файлу, либо объектом, сопоставляющим платформу с путём.

<Tabs>
	<TabItem label="string">
		```json
		{
			"biome.lsp.bin": "/path/to/biome"
		}
		```
	</TabItem>
	<TabItem label="object">

		При использовании объекта ключ представляет собой идентификатор платформы, составленный из значения `<process.os>-<process.arch>`, а значение — путь к бинарному файлу.
		```json
		{
			"biome.lsp.bin": {
				"darwin-arm64": "/path/to/biome",
				"win32-x64": "/path/to/biome.exe"
			}
		}
		```
	</TabItem>
</Tabs>



Следует учитывать, что `@biomejs/biome` не поставляет никаких бинарных файлов. Файл `@biomejs/biome/bin` — это просто небольшая
обёртка, которая делегирует операции реальному бинарному файлу. Бинарный файл, установленный на вашей машине, зависит от архитектуры вашей ОС и архитектуры.

Бинарные файлы представляют собой пакеты, начинающиеся с `@biomejs/cli-*`, их можно найти в [этом списке](https://www.npmjs.com/search?q=%40biomejs%2Fcli-*).
Поэтому, если вы указываете на бинарный файл, установленный через `npm`, конфигурация будет выглядеть так:


<Tabs>
	<TabItem label="string">
		```json
		{
			"biome.lsp.bin": "./node_modules/@biomejs/cli-linux-x64/bin"
		}
		```
	</TabItem>
	<TabItem label="object">

		При использовании объекта ключ представляет собой идентификатор платформы, составленный из значения `<process.os>-<process.arch>`, а значение — путь к бинарному файлу.
		```json
		{
			"biome.lsp.bin": {
				"darwin-arm64": "./node_modules/@biomejs/cli-darwin-arm64/bin",
				"win32-x64": "./node_modules/@biomejs/cli-win32-x64/bin"
			}
		}
		```
	</TabItem>
</Tabs>

### `biome.runFromTemporaryLocation`

**По умолчанию:** `true (windows), false (others)` | **Области действия:** `global`, `workspace`, `workspace folder`

Определяет, следует ли копировать бинарный файл Biome и запускать его из временного расположения.

В Windows отключение этой настройки не позволит вам обновлять Biome в ваших node modules во время активной
LSP-сессии, поскольку ОС блокирует бинарный файл во время его выполнения. Вам потребуется закрыть VS Code перед обновлением Biome.

### `biome.suggestInstallingGlobally`

**По умолчанию:** `true` | **Области действия:** `global`, `workspace`, `workspace folder`

Когда требуется глобальная установка Biome, но она не найдена в `PATH`, расширение предложит её установить.

Эта настройка контролирует, будет ли показано это всплывающее предложение.

### `biome.lsp.trace.server`

**По умолчанию:** `off` | **Области действия:** `global`

Эта настройка позволяет установить уровень логирования трассировки Biome LSP. Возможные значения: `off`, `messages`, `verbose`.
Вы можете установить эту настройку в `verbose`, если столкнётесь с проблемами в работе расширения и захотите поделиться с нами логами.

## Устранение неполадок

Иногда вы можете столкнуться с неожиданными проблемами в работе расширения. Вот несколько советов, которые помогут устранить
наиболее распространённые проблемы и сбросить состояние расширения.

### Доступ к трассировке LSP

Если вы столкнётесь с проблемами в работе расширения, мы можем попросить вас поделиться с нами трассировкой LSP. Это можно сделать, установив настройку [`biome.lsp.trace.server`](#biomelsptrace_server) в значение `verbose`
и повторив действие, которое вызвало проблему. Трассировка будет доступна на панели [вывода](vscode://workbench/panel) под опцией выбора `Biome LSP trace (xxx)`.

## Миграция с расширения `2.x`

Если вы мигрируете с расширения версии `2.x`, мы рекомендуем выполнить следующие шаги в точности в этом порядке:
1. Обновите расширение
2. Полностью закройте редактор.
3. Откройте ваш диспетчер задач и убедитесь, что завершили все процессы с именем `biome`.
4. Откройте редактор.

Это уничтожит возможные старые соединения Daemon, которые всё ещё подключены к редактору, но не могут быть корректно завершены расширением, что вызывало
некорректное форматирование при сохранении файла.

### Изменения

- Настройка `biome.lspBin` устарела в пользу `biome.lsp.bin`. Она пока будет работать, но мы рекомендуем обновить ваши настройки, используя новое имя.
- Настройка `biome.requireConfigFile` была переименована в `biome.requireConfiguration`. Вам следует выполнить миграцию настройки сейчас, так как **старая больше не поддерживается**.
