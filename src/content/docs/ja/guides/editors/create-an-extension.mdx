---
title: エディタ拡張機能へのBiomeの統合
description: BiomeをエディタやIDEに統合する方法
---

Biomeは [LSP](https://microsoft.github.io/language-server-protocol/) を一流のサポートとして提供しています。エディタがLSPを実装している場合、Biomeの統合はシームレスに行われるはずです。

### LSP プロキシを使用する

Biomeには `lsp-proxy` というコマンドがあります。このコマンドを実行すると、Biomeは以下の2つのプロセスを生成します：

- 要求された操作を実行する[デーモン](/internals/architecture#daemon)
- クライアント（エディタ）からのリクエストとサーバー（デーモン）間のプロキシとして機能するサーバー

エディタがサーバーとやり取りし、[JSON-RPC](https://www.jsonrpc.org/) リクエストを送信できる場合、このコマンドを実行するようにエディタを設定するだけで済みます。

[`neo-vim biome extension`](https://github.com/neovim/nvim-lspconfig/blob/master/lua/lspconfig/configs/biome.lua) がどのように実装しているかを確認できます。

### `stdin` を使用する

エディタがLSPをサポートしていない場合でも、バイナリ `biome` を直接使用し、[標準入力](<https://en.wikipedia.org/wiki/Standard_streams#Standard_input_(stdin)>)を介して呼び出すことができます。

以下のコマンドは標準入力を介して呼び出すことができます：

- [`format`](/reference/cli/#biome-format)
- [`lint`](/reference/cli/#biome-lint)
- [`check`](/reference/cli/#biome-check)

Biomeは新しい出力（変更がない場合は元の出力）を[標準出力](<https://en.wikipedia.org/wiki/Standard_streams#Standard_output_(stdout)>)に、診断結果を[標準エラー](<https://en.wikipedia.org/wiki/Standard_streams#Standard_error_(stderr)>)に返します。

`stdin` を使用する場合、`--stdin-file-path` オプションを渡す必要があります。このファイルパスは**ファイルシステム上に存在する必要はありません**。任意の名前で構いませんが、**重要なのは**正しいファイル拡張子を指定することです。これにより、Biomeは**ファイルの処理方法**を認識します。

エディタがバイナリのパスを解決し、必要に応じて呼び出す責任を負います。サポートしているアーキテクチャとOSに基づいて、バイナリはnpmに配布されています：

- `@biomejs/cli-darwin-arm64`
- `@biomejs/cli-darwin-x64`
- `@biomejs/cli-linux-arm64`
- `@biomejs/cli-linux-x64`
- `@biomejs/cli-win32-arm64`
- `@biomejs/cli-win32-x64`

バイナリ名は `biome` または `biome.exe` で、ライブラリのルートディレクトリに配置されています。例：`@biomejs/cli-darwin-arm64/biome`、`@biomejs/cli-win32-x64/biome.exe`

### 拡張機能の設定

Biomeの言語サーバは以下の設定を公開しており、拡張機能はこれらをユーザーに公開できます。

:::note
以下の設定は**拡張機能開発者向け**であり、ユーザー向けではありません。
拡張機能は、異なる名前や異なる形式で設定をユーザーに公開することができます。

例えば、Zed拡張機能は[`require_configuration`](#require-configuration)設定を、JSONCファイルで定義される`require_config_file`設定としてマッピングしています。
:::

#### `require_configuration`

> 型: `boolean`
> デフォルト: `false`

Biomeの言語サーバが設定ファイルを必要とするかどうか。`true`に設定すると、プロジェクトのルートに`biome.json`ファイルがあるまで、（パース以外の）ファイルの解析を行いません。

```json
{
  "require_configuration": true
}
```

#### `configuration_path`

> 型: `string`
> デフォルト: `null`

カスタム設定ファイルへのパス。パスは `biome.json` / `biome.jsonc` があるフォルダ、またはファイルへのパスを指定できます。

パスは相対パスまたは絶対パスで指定できます。Biomeの言語サーバは、この設定が指定された場合にのみ読み取ります。設定が *プロジェクトのサブフォルダにある* 場合にこの設定を使用してください。

```json
{
  "configuration_path": "./frontend/biome.json"
}
```

#### `inline_config`

> 型: `object`
> デフォルト: `null`

Biome設定のインラインバージョン。この設定のオプションは、ディスクから読み取られた `biome.json` ファイル（またはデフォルト値）のオプションを上書きします。

例えば、プロジェクトで `noConsole` ルールを `error` の重大度で有効にしているとします：

```json title="biome.json"
{
  "linter": {
    "rules": {
      "suspicious": {
        "noConsole": "error"
      }
    }
  }
}
```

しかし、ローカル開発中は、このルールが便利で赤い波線を見たくないため、このルールを無効にしたいとします。`inline_config`には、次のように記述します：

```json
{
  "inline_config": {
    "linter": {
      "rules": {
        "suspicious": {
          "noConsole": "off"
        }
      }
    }
  }
}
```

### バイナリとデーモンを使用する

CLIを介してバイナリを使用するのは非常に効率的ですが、[ログ](#デーモンログ)をユーザーに提供することはできません。CLIを使用するとデーモンを起動し、デーモン経由でCLIコマンドを使用できます。

これを行うには、まず [`start`](/reference/cli#biome-start) コマンドでデーモンプロセスを開始する必要があります：

```shell
biome start
```

その後、すべてのコマンドに `--use-server` オプションを追加する必要があります。例：

```shell
echo "console.log('')" | biome format --use-server --stdin-file-path=dummy.js
```

:::note
デーモンを使用する場合、プロセスを再起動または終了する責任もあります。これは [`stop`](/reference/cli#biome-stop) コマンドで行い、ゴーストプロセスを防ぎます。
:::

:::caution
デーモン経由の操作はCLIそのものよりも著しく遅いので、単一ファイルでの操作のみに使用することをお勧めします。
:::

### デーモンログ

Biomeデーモンはログをファイルシステムに保存します。ログは `biome-logs` というフォルダに保存されます。このフォルダのパスはOSによって異なります：

- Linux: `~/.cache/biome`
- Windows: `C:\Users\<UserName>\AppData\Local\biomejs\biome\cache`
- macOS: `/Users/<UserName>/Library/Caches/dev.biomejs.biome`

その他のOSでは、システムの一時ディレクトリ内にフォルダがあります。

正確なパスを取得するには、以下のコマンドを実行してください：

```shell
biome explain daemon-logs
```

ログファイルは毎時ローテーションされます。
