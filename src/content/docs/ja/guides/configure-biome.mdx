---
title: Biomeの設定
description: Biomeを使用して新しいプロジェクトをセットアップする方法
---

import { FileTree } from '@astrojs/starlight/components';

このガイドでは、Biomeの設定方法を理解するために役立ちます。
Biomeの設定ファイルの構成と、Biomeがどのように設定を解決するかを説明します。
あなたがすでに設定方法について詳しい場合は、利用可能なすべてのオプションの詳細が記載された[設定リファレンス](/reference/configuration/)を参照してください。

Biomeでは、CLIのオプションか `biome.json` または `biome.jsonc` の設定ファイルを使って動作をカスタマイズできます。
設定ファイルをそれぞれのプロジェクトに作成することを推奨しています。
これにより、CLIおよびBiomeと連携したエディタにおいてチームのメンバが同じ設定を使うことを保証できます。
設定ファイルで利用可能なオプションの多くはCLIでも利用できます。

## 設定ファイル

Biomeはツールチェーンであるため、設定は提供されるツールごとに整理されています。
現時点では、Biomeはフォーマッタ、リンタ、import文のソート（import文の整理とも呼ばれます）の3つのツールを提供しています。
これらのツールはデフォルトですべて有効になっています。
`<tool>.enabled` フィールドによっていくつかを無効にできます：

```json title="biome.json"
{
  "$schema": "https://biomejs.dev/schemas/2.0.0-beta/schema.json",
  "formatter": {
    "enabled": false
  },
  "linter": {
    "enabled": false
  },
  "assist": {
    "enabled": false
  }
}
```

2つ以上の言語に適用されるオプションは対応するツールのフィールドの中に配置されています。
言語に固有のツールのオプションは `<language>.<tool>` の下に配置されています。
特定の言語について一般のオプションを上書きすることもできます。
また、言語によってツールを有効または有効にすることもできます。
以下の例では、一般のオプション `formatter.indentStyle` と `formatter.lineWidth` をすべての言語に設定しています。
加えて、`javascript.formatter` の中ではJavaScript固有のオプション `quoteStyle` を設定し、`formatter.lineWidth` を上書きしています。
JSONファイルについてはフォーマッタを無効にしました。

```json5 title="biome.jsonc"
{
  "formatter": {
    "indentStyle": "space", // デフォルトは `tab`
    "lineWidth": 100 // デフォルトは `80`
  },
  "javascript": {
    "formatter": {
      "quoteStyle": "single", // デフォルトは `double`
      "lineWidth": 120 // `formatter.lineWidth` を上書き
    }
  },
  "json": {
    "formatter": {
      "enabled": false
    }
  }
}
```

:::note
Biomeでは、JavaScript言語のすべての種類を `javascript` と呼んでいます。
これにはTypeScript、JSX、TSXを含みます。
:::


## 設定ファイルの解決

Biomeは最も近い設定ファイルを見つけるために自動探索を利用します。
作業ディレクトリとその親ディレクトリから `biome.json` または `biome.jsonc` ファイルを見つけます。
いずれの設定も見つからない場合は、Biomeのデフォルトを適用します。
`biome.json` と `biome.jsonc` の両方が同じフォルダにある場合は、`biome.json` を優先します。

以下は例です：

<FileTree>
- app/
  - backend/
    - biome.json
    - package.json
  - frontend/
    - legacy/
      - package.json
    - new/
      - package.json
    - biome.json
</FileTree>


- `app/backend/package.json` で実行されたBiomeのコマンドは `app/backend/biome.json` の設定ファイルを使います
- `app/frontend/legacy/package.json` または `app/frontend/new/package.json` で実行されたBiomeのコマンドは
  `app/frontend/biome.json` の設定ファイルを使います

:::note
モノレポのプロジェクトでBiomeを使用する場合は、[モノレポ](/ja/guides/big-projects#モノレポ)を参照してください。
:::

# 処理するファイルを指定する

CLI、設定、またはVCSを使用して、処理するファイルおよびフォルダを制御できます。

:::note
デフォルトでは、Biomeは**保護されたファイル**と呼ばれるファイルを常に無視します。
つまり、これらのファイルに対してはBiomeが診断結果を出力することはありません。
現時点では、以下のファイルが保護されています：

- `composer.lock`
- `npm-shrinkwrap.json`
- `package-lock.json`
- `yarn.lock`
:::

## CLIでファイルを含める

Biomeが処理するファイルまたはディレクトリを制御する最初の方法は、それらをCLIで列挙することです。
以下のコマンドでは、 `file1.js` および `src` ディレクトリ内のすべてのファイルのみをフォーマットします。
ディレクトリは再帰的に探索されます。

```shell
biome format file1.js src/
```

:::caution
コマンドラインで利用されるglobパターンはBiomeによって解釈されず、シェルによって展開されます。
いくつかのシェルは再帰的なglob `**` をサポートしていません。
:::

### 設定でファイルを制御する

Biomeの設定ファイルはどのファイルが処理されるかを調整するのに利用できます。
[`files.includes` フィールド](/ja/reference/configuration)を使用して、処理するファイルを明示的に指定できます。
`files.includes` は `src/**/*.js` のような[globパターン](/ja/reference/configuration#glob文法の説明)を受け入れます。 `!` で始まる否定パターンはファイルを除外するのに使用できます。

Biome設定ファイル内のパスとglobは設定ファイルのあるフォルダから相対的に解決されます。
ただし、設定ファイルが他の設定に[継承](#設定でファイルを制御する)されている場合は例外です。

`files.includes` はすべてのBiomeツールに適用され、他に指定のない限り、ここで指定されたファイルはリンタ、フォーマッタ、アシストによって処理されます。
個別のツールについては、 `<tool>.includes` を使用して一致するファイルを調整できます。


#### 設定でファイルを含める

`src/` フォルダと `test/` フォルダの中にあるJavaScriptファイル (`.js`) のみを含め、名前に `.min.js` を含むファイルを無視するには、以下の設定を使用します:

```json title="biome.json"
{
  "files": {
    "includes": ["src/**/*.js", "test/**/*.js", "!**/*.min.js"]
  },
  "linter": {
    "includes": ["!test/**"]
  }
}
```

そして、以下のコマンドを実行します：

```shell
biome format test/
```

このコマンドは、`test` ディレクトリにおいて `.js` 拡張子で終わり `.min.js` 拡張子で終わらないファイルをフォーマットします。

ディレクトリがCLIで列挙されていないため、`src` 内のファイルはフォーマットされません。

次のコマンドを実行すると、`test` ディレクトリはリンタに対して明示的に無視されているため、ファイルはリントされません。

```shell
biome lint test/
```

:::caution
グローバルな `files.includes` は、より詳細な `<tool>.includes` フィールドとは少し違ったセマンティクスを持ちます。
`files.includes` に一致しないファイルとフォルダは、いずれのBiomeツールからも除外されます。
`files.includes` に一致しないファイルは、ツール固有の `includes` フィールドにも一致しません。
:::

#### 設定でファイルを除外する

Biomeによって処理されるファイルやフォルダを除外したい場合は、 `files.includes` の設定と `!` で始まる否定パターンを使用できます。

否定されたglobを列挙するよりも前に、 **`**` パターンを置く必要があります**。

次の例では、ファイルを含め、 `dist` ディレクトリと `.generated.js` を名前に含むすべてのファイルを除外するようBiomeに指示します:

```json title="biome.json"
{
  "files": {
    "includes": [
      "**",
      "!**/dist/**",
      "!**/*.generated.js"
    ]
  }
}
```


### VCSでファイルを制御する

[VCSで無視されたファイルを無視する](/guides/integrate-in-vcs#use-the-ignore-file)こともできます。


## 既知のファイル

拡張子ではなくファイルの名前に基づいて特別に扱われる、いくつかの既知のファイルが存在します。
現在は既知のファイルはJSONライクなファイルのみですが、新たなパーサをサポートした場合はリストを拡張して他の種類も含める可能性があります。

以下のファイルは `JSON` ファイルとして、オプション `json.parser.allowComments` と `json.parser.allowTrailingCommas` を `false` にした状態でパースされます。

- `.all-contributorsrc`
- `.arcconfig`
- `.auto-changelog`
- `.bowerrc`
- `.c8rc`
- `.htmlhintrc`
- `.imgbotconfig`
- `.jslintrc`
- `.nycrc`
- `.tern-config`
- `.tern-project`
- `.vuerc`
- `.watchmanconfig`
- `mcmod.info`

以下のファイルは `JSON` ファイルとして、オプション `json.parser.allowComments` を `true` に、`json.parser.allowTrailingCommas` を `false` にした状態でパースされます。
これは、これらのファイルを使用するツールがコメントの削除のみを行うためです。

- `.ember-cli`
- `.eslintrc.json`
- `.jscsrc`
- `.jshintrc`
- `tslint.json`
- `turbo.json`

以下のファイルは `JSON` ファイルとして、オプション `json.parser.allowComments` と `json.parser.allowTrailingCommas` を `true` にした状態でパースされます。
これは、これらのファイルを使用するツールがそのような設定を受け入れるようになっているためです。

- `.babelrc`
- `.babelrc.json`
- `.devcontainer.json`
- `.hintrc`
- `.hintrc.json`
- `.swcrc`
- `api-documenter.json`
- `api-extractor.json`
- `babel.config.json`
- `deno.json`
- `devcontainer.json`
- `dprint.json`
- `jsconfig.json`
- `jsr.json`
- `language-configuration.json`
- `tsconfig.json`
- `typedoc.json`
- `typescript.json`


## 設定ファイルの共有

`extends` フィールドは設定を複数のファイルに分割することを可能にします。
この方法により、異なるプロジェクトやフォルダとの間で共通の設定を共有できます。

以下は `common.json` 設定ファイルを継承した設定を行う方法を示した例です：

```json title="biome.json"
{
  "extends": ["./common.json"]
}
```

`extends` に定義されたエントリは `biome.json` ファイルの定義されたパスから解決されます。
記載された順に処理され、後に記載されたファイルの設定がその前の設定を上書きします。

Files that you `extend` from cannot `extend` other files in turn.

Note that paths in a configuration file are always resolved from the folder in
which the `biome.json`/`biome.jsonc` file resides. When using the `extends`
field, this means that paths in a shared configuration are interpreted from the
location of the configuration that is extending it, and not from the folder
of the file being extended.

For example, let's assume a project that contains two directories `backend/` and
`frontend/`, each having their own `biome.json` that both extend a `common.json`
configuration in the root folder:

<FileTree>
- backend/
  - src/
    - ...
  - test/
    - ...
  - biome.json
- frontend/
  - src/
    - ...
  - test/
    - ...
  - biome.json
- common.json
</FileTree>

```json title="common.json"
{
  "files": {
    "includes": ["src/**/*.js", "test/**/*.js"],
  },
  "linter": {
    "includes": ["!test/**"]
  }
}
```

```json title="frontend/biome.json"
{
  "extends": ["../common.json"]
}
```

* When running Biome from the `frontend/` folder, it will be configured to
  format and lint all JavaScript files in the `frontend/src/` and
  `frontend/test/` folders, and only format the files in the `frontend/src/`
  folder. This works because the paths specified in `common.json` are
  interpreted from the `frontend/` folder, because that's where the `biome.json`
  file resides.
* Assuming `backend/biome.json` looks the same as `frontend/biome.json`, it will
  have the same behaviour, except the paths will be interpreted from the
  `backend/` folder.

### NPMパッケージからBiomeの設定をエクスポートする

Biomeは `node_modules/` ディレクトリから設定ファイルを解決できます。
従って、パッケージから設定ファイルをエクスポートして、複数のプロジェクトでそれをインポートできます。

そのようにするためには、まず "共有された" Biomeの設定を作成する必要があります。
パッケージ `@org/shared-configs` から設定ファイルを指定子 `@org/shared-configs/biome` で共有することを考えましょう。
このパッケージの `package.json` に `exports` エントリを作成する必要があります：

```json title="package.json" ins={5,3}
{
  "name": "@org/shared-configs",
  "type": "module",
  "exports": {
    "./biome": "./biome.json"
  }
}
```
`@org/shared-configs` がプロジェクトに正しくインストールされていることを確認し、`biome.json` を以下の例のように更新します：

```json title="biome.json"
{
  "extends": ["@org/shared-configs/biome"]
}
```
Biomeは `@org/shared-configs/` を作業ディレクトリから **解決** しようとします。
作業ディレクトリは：

- CLIを利用している場合、スクリプトを実行するディレクトリです。
  一般的にこれは `package.json` ファイルの場所と同じです
- LSPを利用している場合、プロジェクトのルートディレクトリです

:::caution
どのように解決されるかの破壊的な変更を防ぐために、ドット `.` で始まるパスと `.json` または `.jsonc` で終わるパスは `node_modules/` から解決**されません**。
:::

解決アルゴリズムの詳細な情報については、[Node.jsのドキュメント](https://nodejs.org/api/esm.html#resolution-and-loading-algorithm)を参照してください。
