---
title: 大規模プロジェクトでのBiomeの使用方法
description: 大規模プロジェクトでBiomeを使用するための簡単なガイド
---

import {FileTree, Steps} from '@astrojs/starlight/components';

Biomeは、モノレポや複数のプロジェクトを含むワークスペースなどの大規模なプロジェクトで、適切に使用するためのツールを提供しています。

## 複数の設定ファイルの使用

Biomeの機能をCLIやLSPで使用する場合、ツールは現在の作業ディレクトリから最も近い設定ファイルを参照します。

設定ファイルが見つからない場合、Biomeは設定ファイルが見つかるまで、**上へ上へ**とディレクトリを移動します。

この機能を活用して、プロジェクトやディレクトリごとに異なるオプションを適用することができます。

例えば、`backend`ディレクトリと`frontend`ディレクトリを含むプロジェクトがあるとします。


<FileTree>
  - app
    - backend
      - biome.json
      - package.json
    - frontend
      - biome.json
      - legacy-app
        - package.json
      - new-app
        - package.json
</FileTree>

この場合、`app/backend/package.json`からスクリプトを実行すると、Biomeは`app/backend/biome.json`を設定ファイルとして使用します。

`app/frontend/legacy-app/package.json`または`app/frontend/new-app/package.json`からスクリプトを実行すると、Biomeは`app/frontend/biome.json`を設定ファイルとして使用します。

## 設定の共有

[`extends`](/reference/configuration#extends)オプションを使用して、オプションを複数ファイルに分割することができる。

例えば、以下の要件があるとします：
- `legacy-app`ディレクトリでは、スペースでフォーマットする
- `backend`ディレクトリと`new-app`ディレクトリでは、タブでフォーマットする
- すべてのディレクトリでは、行幅を120でフォーマットする
- `backend`ディレクトリでは、追加で他のリント設定を行う

まず、`app/biome.json`に新しい設定ファイルを作成し、共通オプションの設定を行います：


```json title="app/biome.json"
{
  "formatter": {
    "enabled": true,
    "lineWidth": 120
  }
}
```

ここで、`legacy-app`ディレクトリで別のオプションを使用するため、`app/frontend/biome.json`を`app/frontend/legacy-app/`に**移動**します：


```json title="app/frontend/legacy-app/biome.json"
{
  "formatter": {
    "indentStyle": "space"
  }
}
```

次に、`extends`プロパティを使って、`app/biome.json`のすべてのオプションを継承するように設定を加えます：

```json title="app/frontend/legacy-app/biome.json" ins={2}
{
   "extends": ["../../biome.json"],
   "formatter": {
     "indentStyle": "space"
   }
}
```

最後に、`app/backend/biome.json`でリンタを有効にします：


```json title="app/backend/biome.json"
{
  "extends": ["../biome.json"],
  "linter": {
    "enabled": true,
    "rules": {
      "recommended": true
    }
  }
}
```

## モノレポ

モノレポは、複数のライブラリを単一の大きなリポジトリに保存して管理されるリポジトリです。それぞれのライブラリは独立したプロジェクトであり、異なる構成を持つことがあります。

v2以降では、Biomeはモノレポをサポートしており、以下のようにプロジェクトを準備する必要があります:

<Steps>
1. モノレポのルートに `biome.json` ファイルを作成します。推奨されたルールを使い、フォーマッタのオプションをカスタマイズします。:

    ```json title="biome.json"
    {
        "linter": {
            "enabled": true,
            "rules": {
                "recommended": true
            }
        },
        "formatter": {
            "lineWidth": 120,
            "indentStyle": "space",
            "indentWidth": 6,
        }
    }
    ```
    このファイルは**ルートの設定**と呼ばれ、プロジェクト内の基本的なオプションを設定します。ただし、ネストされた設定はこれらのオプションに従うかどうかを決めることができます。見てみましょう。

2. 必要な各パッケージに一つずつ、ネストされた設定ファイルを作成します。これらのネストされた設定ファイルは `"root"` フィールドを `false` にしている必要があります。
    していない場合はエラーになります。
    加えて、これらのパッケージはルートの設定で指定したフォーマットの標準に従うようにしましょう。
    そのために、Biome v2 で追加された**新しいマイクロ構文**である `"extends": "//"` を利用します。
    この構文はネストされた設定がどこにあるかに関わらず、**ルートの設定**を継承するようBiomeに指示します。

    一つは `packages/logger` の中に、もう一つは `packages/generate` の中に、合わせて二つの設定ファイルを作成しましょう。
    前者では `noConsole` を無効化し、 `packages/generate` ではコード生成されたファイルのフォーマッタを無効化します:

    ```json title="packages/logger/biome.json"
    {
        "root": false,
        "extends": "//",
        "linter": {
            "rules": {
                "suspicious": {
                    "noConsole": "off"
                }
            }
        }
    }
    ```

    ```json title="packages/generate/biome.json"
    {
        "root": false,
        "extends": "//",
        "formatter": {
            "enabled": false
        }
    }
    ```
    しかし、 `extends: "//"` のマイクロ構文を使うときは、この設定はルートの設定ではなく、ルートの設定を継承することが明らかなので、 `"root": false` を**省略**できます:

    ```diff title="packages/generate/biome.json"
    {
    -    "root": false,
        "extends": "//",
        "formatter": {
        "enabled": false
    }
    ```
3. ここで、とても異なるコーディング標準を持った別のチームによって、`packages/analytics` に新しいパッケージが追加されたと仮定しましょう。
    これらのオプションを変更するには、設定ファイルから `"extends": "//"` を省略して、フォーマットのオプションを変更するだけです:
    ```json title="packages/analytics/biome.json"
    {
        "root": false,
        "formatter": {
            "lineWidth": 100,
        }
    }

    ```
4. これですべての準備は整いました。`biome` コマンドをプロジェクトのルートから実行することも、単一のパッケージから実行することもできます。
    Biomeはすべての設定に従います！
</Steps>
